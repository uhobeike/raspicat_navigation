<?xml version="1.0"?>
<launch>
  <!-- Arguments -->
  <arg name="urg_usb"           default="false"/>
  <arg name="urg_ether"         default="true"/>
  <arg name="imu_serial_port"   default="/dev/ttyACM0"/>
  <arg name="urg_serial_port"   default="/dev/ttyACM1"/>
  <arg name="urg_ip_address"    default="172.16.0.10"/>
  <arg name="urg_angle_min"     default="-1.78094870101"/>
  <arg name="urg_angle_max"     default="1.78094870101"/>

  <arg name="waypoint_navigation"   default="true"/>
  <arg if="$(arg waypoint_navigation)"      name="model"  default="$(find raspicatv2_description)/urdf/raspicatv2.urdf"/>
  <arg unless="$(arg waypoint_navigation)"  name="model"  default="$(find raspicat_navigation)/config/urdf/raspicat.urdf.xacro"/>

  <!-- Prameters -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder $(arg model)"/>

  <!-- Robot model import -->
  <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="50.0"/>
  </node>

  <!-- Raspicat node -->
  <include file="$(find raspicat)/launch/raspicat.launch"/>

  <!-- Urg_node -->
  <node pkg="urg_node" name="urg_node" type="urg_node" required="true">
    <param name="angle_min" value="$(arg urg_angle_min)"/>
    <param name="angle_max" value="$(arg urg_angle_max)"/>
    <param if="$(arg waypoint_navigation)"      name="frame_id" value="lidar_link"/>
    <param unless="$(arg waypoint_navigation)"  name="frame_id" value="urg_lrf_link"/>
    <param if="$(arg urg_ether)"  name="ip_address" value="$(arg urg_ip_address)"/>
    <param if="$(arg urg_usb)"    name="serial_port" value="$(arg urg_serial_port)"/>
  </node>
</launch>